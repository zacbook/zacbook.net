---
title: Using Python's Matplotlib with Rmarkdown
author: Zachary T. Harmany
date: '2017-10-28'
slug: using-python-s-matplotlib-with-rmarkdown
categories:
  - metablogging
tags: []
---



<p>One way to include Matplotlib plots in Rmarkdown files within Blogdown is to save them to the <code>/static</code> directory. Files in this directory are then copied over to the <code>/public</code> directory for publishing.</p>
<pre class="bash"><code>pwd
printenv
mkdir -p ../../static/post/2017-10-28-using-python-s-matplotlib-with-rmarkdown
# The p flag will create the directory (and intermediate subdirectories) if it doesn&#39;t exist, otherwise will do nothing</code></pre>
<pre><code>## /Users/zac/git/zacbook.net/content/post
## R_TEXI2DVICMD=/usr/local/bin/texi2dvi
## LN_S=ln -s
## SED=/usr/bin/sed
## RSTUDIO_PANDOC=/Applications/RStudio.app/Contents/MacOS/pandoc
## R_INCLUDE_DIR=/Library/Frameworks/R.framework/Resources/include
## R_PDFVIEWER=/usr/bin/open
## R_DEFAULT_PACKAGES=datasets,utils,grDevices,graphics,stats
## SHELL=/bin/bash
## TERM=xterm-256color
## R_PRINTCMD=lpr
## TMPDIR=/var/folders/2w/xhwrstk17h70wz1g4ln_9xrw0000gn/T/
## Apple_PubSub_Socket_Render=/private/tmp/com.apple.launchd.Bs71KisceR/Render
## R_RD4PDF=times,inconsolata,hyper
## R_SYSTEM_ABI=osx,gcc,gxx,gfortran,?
## RS_SHARED_SECRET=82d45e4e-54c9-442c-8f6f-eaac88abfc3e
## R_PAPERSIZE=a4
## RSTUDIO=1
## RSTUDIO_CONSOLE_WIDTH=104
## USER=zac
## TAR=/usr/bin/tar
## SSH_AUTH_SOCK=/private/tmp/com.apple.launchd.oWgF1v15Uw/Listeners
## R_ZIPCMD=/usr/bin/zip
## __CF_USER_TEXT_ENCODING=0x1F5:0x0:0x0
## PAGER=/usr/bin/less
## R_GZIPCMD=/usr/bin/gzip
## R_QPDF=/Library/Frameworks/R.framework/Resources/bin/qpdf
## PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/Library/TeX/texbin
## RSTUDIO_USER_IDENTITY=zac
## PWD=/Users/zac/git/zacbook.net/content/post
## R_SHARE_DIR=/Library/Frameworks/R.framework/Resources/share
## RSTUDIO_WINUTILS=bin/winutils
## EDITOR=vi
## LANG=en_US.UTF-8
## RSTUDIO_SESSION_PORT=41923
## R_LIBS_SITE=
## XPC_FLAGS=0x0
## XPC_SERVICE_NAME=0
## R_BROWSER=/usr/bin/open
## RMARKDOWN_MATHJAX_PATH=/Applications/RStudio.app/Contents/Resources/resources/mathjax-26
## SSH_ASKPASS=rpostback-askpass
## R_ARCH=
## HOME=/Users/zac
## SHLVL=3
## MAKE=make
## R_PAPERSIZE_USER=a4
## RS_RPOSTBACK_PATH=/Applications/RStudio.app/Contents/MacOS/rpostback
## LOGNAME=zac
## R_UNZIPCMD=/usr/bin/unzip
## LC_CTYPE=en_US.UTF-8
## R_BZIPCMD=/usr/bin/bzip2
## CLICOLOR_FORCE=1
## R_HOME=/Library/Frameworks/R.framework/Resources
## GIT_ASKPASS=rpostback-askpass
## DISPLAY=/private/tmp/com.apple.launchd.nEe0fSXIEz/org.macosforge.xquartz:0
## R_PLATFORM=x86_64-apple-darwin15.6.0
## SECURITYSESSIONID=186a7
## R_DOC_DIR=/Library/Frameworks/R.framework/Resources/doc
## R_LIBS_USER=~/Library/R/3.4/library
## RSTUDIO_CONSOLE_COLOR=256
## R_SESSION_TMPDIR=/var/folders/2w/xhwrstk17h70wz1g4ln_9xrw0000gn/T//RtmpcTkJE5
## _=/usr/bin/printenv</code></pre>
<pre class="r"><code>knitr::current_input() # will return the name of the Rmd file</code></pre>
<pre><code>## [1] &quot;2017-10-28-using-python-s-matplotlib-with-rmarkdown.Rmd&quot;</code></pre>
<pre class="r"><code>getwd() # will return the current work directory</code></pre>
<pre><code>## [1] &quot;/Users/zac/git/zacbook.net/content/post&quot;</code></pre>
<pre class="r"><code>rprojroot::find_rstudio_root_file() # will return the root of the project</code></pre>
<pre><code>## [1] &quot;/Users/zac/git/zacbook.net&quot;</code></pre>
<pre class="r"><code># So should ensure that a directory is created in 
# (ROOT)/(current work directory, removing project root, replace &#39;content&#39; with &#39;static&#39;)/filename/
# Could also, perhaps, simply replace &#39;content&#39; with &#39;static&#39; in current work directory?
# although it seems that blogdown does not make subdirectories within &#39;static&#39; to put images from rcode, so perhaps need to simplify to projectroot/static/filename ?
# The above statement is incorrect - blogdown does create subdirectories within static. The version that was not in a subdirectory was an old version!</code></pre>
<p>For example:</p>
<pre class="python"><code>import numpy as np
import matplotlib.pyplot as plt
n = 256
X = np.linspace(-np.pi,np.pi,n,endpoint=True)
Y = np.sin(2*X)
fig, ax = plt.subplots( nrows=1, ncols=1 )
ax.plot (X, Y+1, color=&#39;blue&#39;, alpha=1.00)
ax.plot (X, Y-1, color=&#39;blue&#39;, alpha=1.00)
# plt.show() # Optionally show plot
fig.savefig(&#39;../../static/post/2017-10-28-using-python-s-matplotlib-with-rmarkdown/foo.png&#39;, bbox_inches=&#39;tight&#39;)</code></pre>
<p>Then using</p>
<pre class="markdown"><code>![A wavy plot.](/post/2017-10-28-using-python-s-matplotlib-with-rmarkdown/foo.png)</code></pre>
<p>the plot will be included in the post. Note that the subdirectory <code>2017-10-28-using-python-s-matplotlib-with-rmarkdown</code> needed to be created by hand. Knitr will not create these automatically as is done with plots generated from R code.</p>
<p>Output image:</p>
<div class="figure">
<img src="/post/2017-10-28-using-python-s-matplotlib-with-rmarkdown/foo.png" alt="A wavy plot." />
<p class="caption">A wavy plot.</p>
</div>
<p>This method does have limitations, such as breaking the inline previews in Rstudio, since they are expected to be in the same directory as the <code>*.Rmd</code> file.</p>
